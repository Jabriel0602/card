<!DOCTYPE html>
<html>
<meta charset="utf-8"/>
<title>优惠券</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
##<meta http-equiv="refresh" content="6">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="-1">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">

<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="/css/public.css">

<link rel="stylesheet" href="/css/g.css">
<link rel="stylesheet" href="/css/coupon.css">
<script src="/js/silder.js" type="text/javascript"></script>
<script src="/js/jquery.min.js" type="text/javascript"></script>
<style>
    .yct-list {
        background: #ecf1f7;
        padding-bottom: 50px;
    }

    .yct-item {
        margin-bottom: 10px;
        border-top: 1px solid #e3e5e9;
        border-bottom: 1px solid #e3e5e9;
    }

    .yct-item a {
        display: block;
    }

    .yct-item-title {
        height: 32px;
        line-height: 32px;
        font-size: 13px;
        color: #000;
        padding: 0 8px;
        background: #fff;
    }

    .yct-item-title .fright {
        float: right;
        height: 32px;
        line-height: 32px;
    }

    .yct-item-main {
        padding: 14px;
        font-size: 12px;
        background: #f8f8f8;
    }

    .yct-item-main .fleft {
        float: left;
        width: 52px;
        line-height: 52px;
        border-radius: 4px;
        font-size: 0;
    }

    .yct-item-main .fleft img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 4px;
    }

    .yct-item-content {
        margin-left: 62px;
    }

    .yct-item-name {
        height: 30px;
        line-height: 30px;
        font-size: 100%;
        color: #000;
    }

    .yct-item-msg {
        height: 18px;
        line-hgeight: 18px;
        font-size: 100%;
        color: #999;
    }

    .yct-item-footer {
        height: 34px;
        line-height: 34px;
        text-align: right;
        padding: 0 8px;
        background: #fff;
        font-size: 13px;
    }

    .yct-item-footer span {
        font-size: 14px;
    }

    .yct-item-footertopay {
        padding: 4px 8px;
        text-align: right;
        background: #fff;
        border-top: 1px solid #e3e5e9;
    }

    .yct-item-footertopay span {
        display: inline-block;
        vertical-align: middle;
        color: #e4393c;
        border: 1px solid #e4393c;
        border-radius: 4px;
        padding: 0 8px;
        font-size: 12px;
        height: 24px;
        line-height: 24px;
    }
</style>

##<body onload="load()">
<!--html start-->
<div class="page">
    <header class="header">
        <a href="javascript:history.go(-1)" class="back comm_20_down"></a> 我的订单
    </header>
    <div class="coupon">
    ##        banner
        <div class="banner" id="banner">
            <ul style="width: 1240px; overflow: hidden; transform: translateX(-620px); transition-duration: 200ms;">
                #foreach($adImage in $adImageList)
                    <li style="width: 620px; vertical-align: top; display: table-cell;">
                        <a href="$adImage.getResponseUrl()"><img src=$adImage.getImgUrl()>
                        </a>
                    </li>
                #end
            </ul>
        </div>
    ##icon
        <div class="section" draggable="false">
            <ul class="secnav clearfix">
                #foreach($icon in $iconList)
                    <li>
                        <div>
                            <a draggable="false" href="$icon.getResponseUrl()">
                                <img draggable="false" alt=""
                                     src="$icon.getImgUrl()"><br>
                                <span>$icon.getDesc()</span>
                            </a>
                        </div>
                    </li>
                #end
            </ul>
        </div>


        <div class="filterpanel" id="filterpanel">
            <div class="alltype" id="allstores">
                <ul class="clearfix">
                    <li class="checked" data-href="//baidu.com">全部楼层</li>
                    <li>1层</li>
                    <li>2层</li>
                    <li>3层</li>
                    <li>4层</li>
                    <li>5层</li>
                </ul>
            </div>
            <div class="alltype" id="alltype">
                <ul class="clearfix">
                    <li>我的关注</li>
                    <li>美食餐饮</li>
                    <li>娱乐</li>
                    <li>超市</li>
                </ul>
            </div>
        </div>

        <div class="hdlist">
            <ul class="yct-list">
                #if($orderList.size()>0)
                    #foreach($order in $orderList)
                        <li class="yct-item">
                            <div class="yct-item-title">
                                一卡通充值
                                #if("充值成功"==${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())})
                                    <span class="fright">${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())}</span>
                                #elseif("退款成功"==${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())})
                                    <span class="fright">${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())}</span>
                                #else
                                    <span class="fright"
                                          style="color: #cb2517">${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())}</span>
                                #end
                            </div>
                            <div class="yct-item-main">
                                <div class="clearfix">
                                    <div class="fleft"><img height="8" width="8" src="/image/bus.png"></div>
                                    <div class="yct-item-content">
                                        <div class="yct-item-name">已充值充值$order.getSkuMoney()元</div>
                                        <div class="yct-item-msg">卡号：$order.getVendorCardId()</div>
                                    </div>
                                </div>
                            </div>

                            #if("未支付"==${orderStatusEnum.getSimpleDescByCode($order.getOrderStatus())})
                                <div class="yct-item-footer">
                                    等待付款：<span>¥ $order.getSkuMoney()</span>
                                </div>

                                <div class="yct-item-footertopay">
                                    <span onclick="document.location.href='//127.0.0.1/pay/submitPage?orderId=$order.getOrderId()'">去支付</span>
                                </div>
                            #else
                                <div class="yct-item-footer">
                                    实付款：<span>¥ $order.getMoney()</span>
                                </div>
                            #end
                        </li>
                    #end
                #else
                    订单列表为空
                #end
            </ul>
        </div>


    </div>

    <div class="footblock">
        <ul class="footerlist clearfix">
            <li>
                <div>
                    <a href="http://127.0.0.1/index">
                        <span class="iconfont icon-home"></span><br>
                        <span>首页</span>
                    </a>
                </div>
            </li>
            <li>
                <div>
                    <a href="#" class="footyh">
                        <span class="iconfont icon-help"></span><br>
                        <span>帮助中心</span>
                    </a>
                </div>
            </li>
            <li class="footsy">
                <div>
                    <a href="//127.0.0.1/orders" class="footsh">
                        <span class="iconfont icon-order"></span><br>
                        <span>我的订单</span>
                    </a>
                </div>
            </li>
            <li>
                <div>
                    <a href="//127.0.0.1/users" class="footwd">
                        <span class="iconfont icon-member"></span><br>
                        <span>个人中心</span>
                    </a>
                </div>
            </li>
        </ul>
    </div>


    <!--html end-->
    <script type="text/javascript">
        Silder({"id": "banner", "creObjClassN": "numb", "titCellPadding": 0, "titCellMargin": 0, "play": true});
        var switchPanelStyle = function (that) {
            if (that == null) return;
            var filterPanel = document.getElementById("filterpanel");
            filterPanel.setAttribute("style", "display:block;")
            var allStores = document.getElementById("allstores");
            var allType = document.getElementById("alltype");
            var id = that.getAttribute("id");
            switch (id) {
                case "storesdown":
                    allStores.setAttribute("style", "display:block;");
                    allType.setAttribute("style", "display:none;");
                    break;
                case "typesdown":
                    allType.setAttribute("style", "display:block;");
                    allStores.setAttribute("style", "display:none;");
                    break;
            }
        };

        var sssstoresdown = $('#storesdown'),
                ssstypesdown = $('#typesdown'),
                sssfilterpanel = $('#filterpanel'),
                sssallstores = $('#allstores'),
                sssalltype = $('#alltype'),
                storeFlag = 0,
                typesFlag = 0;
        sssfilterpanel.on('click', 'li', function () {
            // alert($(this).text());
            window.location.href = $(this).data('href');
        });

        sssstoresdown.on('click', function () {
            if (storeFlag == 1) {
                storeFlag = 0;
                sssfilterpanel.hide().css('display', 'none');
                sssallstores.hide().css('display', 'none');
                sssalltype.hide().css('display', 'none');
            } else {
                sssfilterpanel.show().css('display', 'block');
                sssallstores.show().css('display', 'block');
                sssalltype.hide().css('display', 'none');
                storeFlag = 1;
                typesFlag = 0;
            }
        });
        ssstypesdown.on('click', function () {
            if (typesFlag == 1) {
                console.log(111);
                typesFlag = 0;
                sssfilterpanel.hide().css('display', 'none');
                sssallstores.hide().css('display', 'none');
                sssalltype.hide().css('display', 'none');
            } else {
                sssfilterpanel.show().css('display', 'block');
                sssallstores.show().css('display', 'none');
                sssalltype.hide().css('display', 'block');
                storeFlag = 0;
                typesFlag = 1;
            }
        });
        // var load = function () {
        //     var storesdown = document.getElementById("storesdown");
        //     var typesdown = document.getElementById("typesdown");
        //     storesdown.onclick = function () {
        //         var isExpand = this.getAttribute("isExpand");
        //         if (!isExpand || isExpand == "false") {
        //             isExpand = "true";
        //             this.setAttribute("isExpand", isExpand);
        //             switchPanelStyle(this);
        //             this.setAttribute("style", "border-bottom:none;border-top:2px solid #63b12f;");
        //             typesdown.setAttribute("style", "border-top: 1px solid #d8d8d8;");
        //             typesdown.setAttribute("isExpand", "false");
        //         } else if (isExpand == "true") {
        //             this.setAttribute("style", "border-top: 1px solid #d8d8d8;");
        //             var allSotores = document.getElementById("allstores");
        //             allSotores.setAttribute("style", "display:none;")
        //             var filterPanel = document.getElementById("filterpanel");
        //             filterPanel.setAttribute("style", "display:none;");
        //             isExpand = "false";
        //             this.setAttribute("isExpand", isExpand);
        //         }
        //     };
        //     typesdown.onclick = function () {
        //         var isExpand = this.getAttribute("isExpand");
        //         if (!isExpand || isExpand == "false") {
        //             isExpand = "true";
        //             this.setAttribute("isExpand", isExpand);
        //             switchPanelStyle(this);
        //             this.setAttribute("style", "border-bottom:none;border-top:2px solid #63b12f;");
        //             storesdown.setAttribute("style", "border-top: 1px solid #d8d8d8;");
        //             storesdown.setAttribute("isExpand", "false");
        //         } else if (isExpand == "true") {
        //             this.setAttribute("style", "border-top: 1px solid #d8d8d8;");
        //             var allType = document.getElementById("alltype");
        //             allType.setAttribute("style", "display:none;");
        //             var filterPanel = document.getElementById("filterpanel");
        //             filterPanel.setAttribute("style", "display:none;");
        //             isExpand = "false";
        //             this.setAttribute("isExpand", isExpand);
        //         }
        //
        //     };
        // };
        var _back = function () {
            document.location.href = "//127.0.0.1/orders";
        }
        var _refund = function (orderId) {
            var url = '//127.0.0.1/refunds';
            $.ajax({
                url: url,
                type: 'POST',
                data: {
                    orderId: orderId
                },
                dataType: 'json',
                success: function (data) {
                    var json = JSON.stringify(data);
                    var jsonObject = JSON.parse(json);
                    if (jsonObject.code == 200) {
                        if (jsonObject.data.size == 0) {
                            return;
                        }
                        alert(jsonObject.data)
                        _back();
                        return;
                    } else {
                        alert("参数错误")
                    }
                },
                error: function () {
                    alert("出错了");
                }
            })
        }

    </script>

    </body></div>
</html>