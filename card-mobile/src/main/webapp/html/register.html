<!DOCTYPE html>
<html>
<meta charset="utf-8"/>
<title>注册</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="-1">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<link rel="stylesheet" href="/css/g.css">
<link rel="stylesheet" href="../../css/home.css">
<link rel="stylesheet" href="/css/register.css">
<script src="../js/zepto.min.js" type="text/javascript"></script>
<script src="../../js/jquery.min.js" type="text/javascript"></script>

<body onload="_load();">
<!--html start-->
<div class="page">
    <div class="register">
        <div class="topblock">
            <i>
                <a href="javascript:history.go(-1)"><img src="/image/back.png"></a>
            </i>
            <h2>注册</h2>
        </div>
        <div class="tip">
            <div class="tip1">温馨提示</div>
            <div class="tip2">请妥善管理您的密码</div>
        </div>
        <div class="form">
            <form action="/users/register" id="_login_form" method="post">
                <ul>
                    <li>
                        <i>
                            <img src="/image/usericon.png">
                        </i>
                        <input class="mip" type="input" id="userName" name="userName" placeholder="请输入用户名"
                               onchange="_validateUserName()">
                        <div class="merr hide" id="userNameTip">此处为必填项</div>
                    </li>
                    <li>
                        <i>
                            <img src="/image/locker.png">
                        </i>
                        <input class="mip" type="password" id="password" name="password" placeholder="请输入密码"
                               onchange="_validatePassword()">
                        <div class="mask hide" id="mask"></div>
                        <div class="merr hide" id="passwordTip">此处为必填项</div>
                    </li>
                    <li>
                        <div>
                            <input class="mbt1" id="j_sb" type="button" onclick="_submit()" value="注册">
                        </div>
                    </li>
                    <li>
                        <div class="mbox">
                            <input type="checkbox" id="agreement" checked>我已同意《<a href="#">公交卡在线充值系统相关协议</a>》
                        </div>
                    </li>
                </ul>
            </form>
        </div>
        <div class="footblock">
            <ul class="footerlist clearfix">
                <li>
                    <div>
                        <a href="http://localhost/index" class="footwd">
                            <img alt="" src="/image/home.png"><br>
                            <span>首页</span>
                        </a>
                    </div>
                </li>
                <li>
                    <div>
                        <a href="#" class="footyh">
                            <img alt="" src="/image/yh.png"><br>
                            <span>帮助中心</span>
                        </a>
                    </div>
                </li>
                <li>
                    <div>
                        <a href="//127.0.0.1/orders" class="footsh">
                            <img alt="" src="/image/stores.png"><br>
                            <span>我的订单</span>
                        </a>
                    </div>
                </li>
                <li>
                    <div>
                        <a href="//127.0.0.1/users" class="footsy">
                            <img alt="" src="/image/wod.png"><br>
                            <span>个人中心</span>
                        </a>
                    </div>
                </li>
            </ul>
        </div>

    </div>
</div>
<!--html end-->
<script type="text/javascript">
    var _load = function () {
        var userName = jQuery('input[name=userName]').val();
        userName.onblur = function () {
            _validateUserName(this);
        };
        var password = jQuery('input[name=password]').val();
        password.onblur = function () {
            _validatePassword(this);
        };
    };
    var _submit = function () {

        var userName = jQuery('input[name=userName]').val();

        if (userName == null | userName.length == 0) {
            _showErrorMessage("userNameTip", "用户名不能为空！", true);
            userName.focus();
            return;
        }
        _showErrorMessage('userNameTip', false);

        var password = jQuery('input[name=password]').val();

        if (password == null) {
            _showErrorMessage("passwordTip", "密码不能为空！", true);
            password.focus();
            return;
        }
        if (password.length < 6) {
            _showErrorMessage("passwordTip", "密码不能少于6位！", true);
            password.focus();
            return;
        }
        jQuery('#_login_form').submit();
    };


    var _showErrorMessage = function (messId, message, show) {
        if (messId == null) return;
        var Tip = document.getElementById(messId);
        if (show === true) {
            Tip.setAttribute("class", "merr");
            Tip.innerHTML = message;
        } else {
            Tip.setAttribute("class", "merr hide");
        }
    };


    var _validateUserName = function () {
        var userName = jQuery('input[name=userName]').val();

        if (userName == null | userName.length == 0) {
            _showErrorMessage("userNameTip", "用户名不能为空！", true);
            userName.focus();
            return;
        }
        _showErrorMessage('userNameTip', false);

    }

    var _validatePassword = function () {
        var password = jQuery('input[name=password]').val();

        if (password == null) {
            _showErrorMessage("passwordTip", "密码不能为空！", true);
            password.focus();
            return;
        }
        if (password.length < 6) {
            _showErrorMessage("passwordTip", "密码不能少于6位！", true);
            password.focus();
            return;
        }
        _showErrorMessage('passwordTip', false);

    }
</script>
</body>
</html>