<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>帮助中心</title>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <meta http-equiv="Cache-Control" CONTENT="no-cache">
        <meta http-equiv="Pragma" CONTENT="no-cache">
        <link rel="stylesheet" href="/css/iconfont/iconfont.css">
        <link rel="stylesheet" href="/css/home.css">
        <link rel="stylesheet" href="/css/g.css">

        <link rel="stylesheet" href="/css/personal.css">
        <link rel="stylesheet" href="/css/public.css">


        <script src="/js/silder.js" type="text/javascript"></script>
        <script src="/js/jquery.min.js" type="text/javascript"></script>
    </head>
</head>
<body onload="load()">
<!--html start-->
<div class="page">
    <header class="header">
        <a href="javascript:history.go(-1)" class="back comm_20_down"></a> 帮助中心
    </header>



    <div class="footblock">
        <ul class="footerlist clearfix">
            <li>
                <div>
                    <a href="/">
                        <span class="iconfont icon-home"></span><br>
                        <span>首页</span>
                    </a>
                </div>
            </li>
            <li>
                <div>
                    <a href="/html/help.html" class="footyh">
                        <span class="iconfont icon-help"></span><br>
                        <span>帮助中心</span>
                    </a>
                </div>
            </li>
            <li>
                <div>
                    <a href="/orders" class="footsh">
                        <span class="iconfont icon-order"></span><br>
                        <span>我的订单</span>
                    </a>
                </div>
            </li>
            <li class="footsy">
                <div>
                    <a href="/users" class="footwd">
                        <span class="iconfont icon-member"></span><br>
                        <span>个人中心</span>
                    </a>
                </div>
            </li>
        </ul>
    </div>

</div>


<!--html end-->
<script type="text/javascript">
    var _back = function () {
        document.location.href = "/users";
    }

    var load = function () {
        //打开设置昵称面板
        var setName = document.getElementById("setname");
        setName.onclick = function () {
            showObj("namemask", "yes");
        };
        //打开设置性别面板
        var setGender = document.getElementById("setgender");
        setGender.onclick = function () {
            showObj("gendermask", "yes");
        };
        //打开设置日期面板
        var setDate = document.getElementById("setdate");
        setDate.onclick = function () {
            showObj("datemask", "yes");
        };
    };
    var showObj = function (objid, yesorno) {
        var obj = document.getElementById(objid);
        if (obj == null) return;
        if (yesorno == "yes") {
            obj.setAttribute("style", "display:block");
        } else if (yesorno == "no") {
            obj.setAttribute("style", "display:none");
        }
    };
    var cancelSetGender = function () {

    };
    var confirmSetName = function () {
        var newName = jQuery('input[id=newname]').val();
        updateUserName('$user.getUserId()', newName);
        showObj("namemask", "no");
        _back();
    };
    var confirmSetSex = function () {
        var sex = $("[name='sex']:checked").val();
        updateUserSex('$user.getUserId()', sex);
        showObj("gendermask", "no");
        _back();
    };
    var confirmSetDate = function () {
        var birthday = jQuery('input[id=birthday]').val();
        updateUserBirth('$user.getUserId()', birthday);
        // var date = document.getElementById("date");
        // date.innerHTML = birthday.value;
        showObj("datemask", "no");
        _back();
    };

    var updateUserName = function (userId, userName) {
        var url = '/users/' + userId + '/userName';
        jQuery.ajax({
            url: url,
            type: 'PUT',
            data: {
                userId: userId,
                userName: userName
            },
            success: function (data) {
                if (data) {
                    alert("修改成功");
                    return;
                } else {
                    alert("修改失败");
                    return;
                }
            },
            error: function () {
                return;
            }
        })
    }

    var updateUserSex = function (userId, sex) {
        var url = '/users/' + userId + '/sex';
        jQuery.ajax({
            url: url,
            type: 'PUT',
            data: {
                userId: userId,
                sex: sex
            },
            success: function (data) {
                if (data) {
                    alert("修改成功");
                    return;
                } else {
                    alert("修改失败");
                    return;
                }
            },
            error: function () {
                return;
            }
        })
    }

    var updateUserBirth = function (userId, birthday) {
        var url = '/users/' + userId + '/birthday';
        jQuery.ajax({
            url: url,
            type: 'PUT',
            data: {
                userId: userId,
                birthday: birthday
            },
            success: function (data) {
                if (data) {
                    alert("修改成功");
                    return;
                } else {
                    alert("修改失败");
                    return;
                }
            },
            error: function () {
                return;
            }
        })
    }

</script>
</body>
</html>
微信:66666666
电话:18888888888